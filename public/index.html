<!DOCTYPE html>
<html lang="pt_BR">

<head>
  <!--Informa√ß√µes gerais da p√°gina-->
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mercadinho Alian√ßa</title>

  <!--Biblioteca Swiper-->
  <link rel="stylesheet" href="https://unpkg.com/swiper@8/swiper-bundle.min.css" />


  <!--CSS-->
  <link rel="stylesheet" href="/estilo.css">


  <!--√çcones-->
  <link rel="stylesheet" href="assets/fonts/style.css">

  <!--Fontes-->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,700;1,500&family=Poppins:wght@400;500;700&display=swap"
    rel="stylesheet">

  <!--Favicon-->
  <link rel="icon" type="image/x-icon" href="assets/images/sistema/image.jpeg">

  <script>
    // Desativa bot√£o direito
    document.addEventListener('contextmenu', e => e.preventDefault());

    // Desativa algumas teclas comuns do DevTools
    document.onkeydown = function (e) {
      if (                           // F12
        (e.ctrlKey && e.shiftKey && e.key === "I") || // Ctrl+Shift+I
        (e.ctrlKey && e.shiftKey && e.key === "J") || // Ctrl+Shift+J
        (e.ctrlKey && e.key === "U") ||               // Ctrl+U (view source)
        (e.ctrlKey && e.key === "S") ||               // Ctrl+S (save page)
        (e.ctrlKey && e.shiftKey && e.key === "C")    // Ctrl+Shift+C (inspecionar)
      ) {
        e.preventDefault();
        return false;
      }
    };
  </script>
  <style>
    .btn-admin {
      display: inline-block;
      padding: 10px 20px;
      background-color: #444;
      color: #fff;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
      margin: 15px;
      transition: background-color 0.3s ease;
    }

    .btn-admin:hover {
      background-color: #222;
    }
  </style>

  <header id="header">
    <nav class="container">

      <!-- Linha topo -->
<div class="nav-top" id="navTop">

  <!-- ESQUERDA: localiza√ß√£o -->
  <div class="nav-left" id="navLeft">
    <span class="nav-pin" aria-hidden="true">üìç</span>
    <span class="nav-city">Po√ßo Branco</span>
  </div>

  <!-- CENTRO: sua logo -->
  <a href="#" class="logo">Mercadinho <span>Alian√ßa</span></a>

  <!-- DIREITA: carrinho + menu -->
  <div class="nav-right" id="navRight">

    <!-- Carrinho com badge -->
    <button class="nav-cart" id="btnCart" type="button" aria-label="Carrinho">
      <span class="cart-ico" aria-hidden="true">üõí</span>
      <span class="cart-badge" id="cartBadge">0</span>
    </button>

    <!-- Bot√£o menu (use o seu id/classe se j√° existir) -->
    <button class="nav-menu" id="btnMenu" type="button" aria-label="Abrir menu">
      <span></span><span></span><span></span>
    </button>

  </div>
</div>

      <!-- Aparece ap√≥s scroll -->
      <div class="nav-central">


        <div class="barra-pesquisa">
          <input type="text" id="pesquisa" placeholder="Buscar produto...">
          <ul id="resultados-pesquisa"></ul>
        </div>
        


        <div class="categorias-navbar">
          <button class="cat-btn filtro-btn" data-categoria="mercearia" onclick="filtrarCategoria('mercearia')">
            <img src="assets/images/categoria/mercearia.jpg" class="categoria-icon"> Mercearia
          </button>
          <button class="cat-btn filtro-btn" data-categoria="padaria" onclick="filtrarCategoria('padaria')">
            <img src="assets/images/categoria/padaria.jpg" class="categoria-icon"> Padaria
          </button>
          <button class="cat-btn filtro-btn" data-categoria="perec√≠veis" onclick="filtrarCategoria('perec√≠veis')">
            <img src="assets/images/categoria/pereciveis.png" class="categoria-icon"> Perec√≠veis
          </button>
          <button class="cat-btn filtro-btn" data-categoria="bebidas" onclick="filtrarCategoria('bebidas')">
            <img src="assets/images/categoria/bebidas.png" class="categoria-icon"> Bebidas
          </button>
          <button class="cat-btn filtro-btn" data-categoria="higiene" onclick="filtrarCategoria('higiene')">
            <img src="assets/images/categoria/higiene e limpeza.jpg" class="categoria-icon"> Higiene
          </button>
          <button class="cat-btn filtro-btn" data-categoria="bazar" onclick="filtrarCategoria('bazar')">
            <img src="assets/images/categoria/bazar.webp" class="categoria-icon"> Eletros
          </button>
        </div>
          


    </nav>
  </header>
  <div class="menu-lateral">
    <ul class="atalhos">
      <li><a href="#home">In√≠cio</a></li>
      <li><a href="#categoria-destaque">Produtos</a></li>
      <li><a href="#contact">Contato</a></li>
    </ul>
    <div class="menu-rodape">
      <a href="/login"><img src="assets/images/sistema/user.png" alt="Login"></a>
    </div>
  </div>

  <main>


    
<section class="home-premium" id="home">


  <!-- HERO imagem full width -->
  <div class="hero-cover">
    <!-- ‚úÖ imagem cobrindo 100% -->
    <img
      src="assets/images/sistema/arte2.png"
      alt="Padaria e Mercadinho Alian√ßa"
      class="hero-cover-img"
    />

    <!-- ‚úÖ degrad√™ para ‚Äúfundir‚Äù com a cor do site -->
    <div class="hero-fade"></div>
  </div>

  <!-- Conte√∫do abaixo da imagem -->
  <div class="hero-content">
    <p class="hero-welcome">Bem-vindo a</p>

    <h1 class="hero-name">
      Padaria e Mercadinho <span>Alian√ßa</span>
    </h1>


    <div class="hero-mini-cards">
      <div class="mini-card">
        <div class="mini-ico">üöö</div>
        <div class="mini-txt">Entrega R√°pida</div>
      </div>

      <div class="mini-card">
        <div class="mini-ico">%</div>
        <div class="mini-txt">Ofertas Especiais</div>
      </div>
    </div>

    <a href="#categoria-destaque" class="hero-cta">Fazer Pedido</a>
  </div>

</section>

    <div class="divider-1"></div> <!--Divisor de sess√µes tipo 1-->
 

    <section class="section" id="about"> <!--categorias-->



<section class="zap-banner">
  <div class="zap-container">
    <div class="zap-texto">
      <br>
      <h2>Compre com Facilidade</h2>
      <p>
        <img src="assets/images/sistema/zap.webp" alt="WhatsApp" class="zap-icon">
        Monte seu carrinho e ser√° enviado direto para o WhatsApp! üí¨
      </p>
      <br>
    </div>
  </div>
</section>




  <section class="whatsapp-banner entrega-banner">
    <div class="banner-container">
      <div class="texto-banner organizado">
  <h2>üöÄ Delivery na √Årea!</h2>
  <p>
    Fa√ßa seu pedido e receba tudo no conforto da sua casa!
  </p>
  <ul class="info-entrega">
    <li>üì¶ Valor m√≠nimo para entrega: <strong>R$ 20,00</strong>.</li>
    <li>üèôÔ∏è <strong>Cidade:</strong> envio gr√°tis.</li>
    <li>üåæ <strong>Interior:</strong> taxa de envio fixa de <strong>R$ 10,00</strong>.</li>
  </ul>
</div>

      <div class="imagem-animada">
        <img src="assets/images/sistema/motoboy.png" alt="Motoboy indo fazer entrega">
      </div>
    </div>
  </section>
 
<div class="carrossel-container">
  <h2 class="carrossel-titulo"> Sacol√µes em Destaque üç≤</h2>

  <div class="carrossel-wrapper">
    <div class="carrossel" id="carrossel">
      <!-- Produtos s√£o inseridos dinamicamente via JS -->
    </div>
  </div>

  <div class="carrossel-navegacao">
    <button class="navegacao-btn" id="anterior">‚ùÆ</button>
    <button class="navegacao-btn" id="proximo">‚ùØ</button>
  </div>

  <div class="dots-container" id="dots-container"></div>
</div>

      <br><br>

      <div id="alerta" class="alerta">Produto adicionado ao carrinho!</div>



      <div class="categoria-destaque" id="categoria-destaque">
        <h2 id="titulo-categoria">Mercearia</h2>

      </div>
      <div class="container">
        <div class="produtos" id="lista-produtos">

        </div>
        <br><br>
        <div class="carrinho" id="carrinho">
          <h2 class="titulo-carrinho animar-scroll">
            Carrinho
            <img src="assets/images/sistema/carrinho.png" alt="Carrinho" class="icone-carrinho">
          </h2>
          <div id="itens-carrinho"></div>
          <div class="total">Total: R$ <span id="total">0.00</span></div>
          <br>
          <button id="whatsapp" onclick="enviarWhatsApp()">Enviar para WhatsApp</button>
          <div id="erro-pedido" class="erro-pedido"></div>
        </div>
      </div>
    </section>
    
    <div class="divider-2"></div> <!--Divisor de sess√µes tipo 2-->


    <section class="section" id="contact">
      <div class="container grid">
        <div class="text">
          <center>
          <h2 class="title">Entre em contato conosco!</h2>
          <p>Entre em contato com o Mercadinho Alian√ßa, queremos tirar suas d√∫vidas e ouvir suas sugest√µes.
          </p></center>
          <a href="https://api.whatsapp.com/send?phone=5584988692337" class="button" target="_blank"><i
              class="icon-whatsapp"></i> Entrar em contato</a>
        </div>
        <div class="links">
          <ul class="grid">
            <li><i class="icon-phone"></i> 84 98869-2337</li>
            <li><i class="icon-map-pin"></i> Av. Manuel Rodrigues, 1248, centro, CEP: 59560-000, Po√ßo Branco/RN</li>
            <li><i class="icon-mail"></i> tramalho250@gmail.com</li>
          </ul>
        </div>
      </div>
    </section>
<div class="imagem-final-decorativa">
    <img src="assets/images/sistema/inferior.png" alt="Decora√ß√£o inferior">
  </div>
    <div class="divider-1"></div> <!--Divisor de sess√µes tipo 1-->

  </main>

  <footer class="section">
    <div class="container grid">
      <div class="brand">
        <a href="#home" class="logo logo-alt">Mercadinho<span style="border: #222;">Alian√ßa</span></a>
        <p>¬©2020 Mercadinho Alian√ßa</p>
        <p>Todos os direitos reservados</p>
        <p>Web developer - Thyago Ramalho</p>
      </div>

      <div class="social grid">
        <a href="https://www.instagram.com/padariaemerc_alianca" target="_blank"><i class="icon-instagram"></i></a>
      </div>
    </div>
  </footer>

<a href="#carrinho" class="back-to-top" id="carrinhoButton">
  <img style="width: 35px;height: 35px;" src="assets/images/sistema/carrinho.png" alt="">
  <span id="contador-carrinho" class="contador-carrinho">0</span>
</a>

<script>
const produtosDestaque = [
   {
        titulo: "Cesta B√°sica de 2kg",
        descricao: "Macias e deliciosas, direto da padaria.",
        preco: "R$ 60,00",
        imagem: "assets/images/destaque/2kg.webp",
        whatsapp: "5584988692337",
        mensagem: "Ol√°, tenho interesse na Cesta B√°sica de 2kg. Poderia me dar mais informa√ß√µes sobre ela?"
    },
    {
        titulo: "Cesta B√°sica de 4kg",
        descricao: "4 Arroz, 4 Feij√µes, 4 Fubas, 4 A√ß√∫cares, 1 √≥leo, 1 refrigerante, 1 macarr√£o, 1 caf√© grande, 2 bolachas, 1 sal",
        preco: "R$ 109,90",
        imagem: "assets/images/destaque/10kg.jpg",
        whatsapp: "5584988692337",
        mensagem: "Ol√°, tenho interesse na Cesta B√°sica de 4kg. Poderia me dar mais informa√ß√µes sobre ela?"
    },
    {
        titulo: "Cesta B√°sica de 8kg",
        descricao: "Macias e deliciosas, direto da padaria.",
        preco: "R$ 260,00",
        imagem: "assets/images/destaque/8kg.webp",
        whatsapp: "5584988692337",
        mensagem: "Ol√°, tenho interesse na Cesta B√°sica de 8kg. Poderia me dar mais informa√ß√µes sobre ela?"
    },
    {
        titulo: "Cesta B√°sica de 10kg",
        descricao: "10 Arroz, 10 Feij√µes, 10 Fubas, 10 A√ß√∫cares, 3 √≥leo, 1 refrigerante, 10 macarr√£o, 2 caf√© grande, 2 bolachas, 1 sal, 1 tempero completo, 1 farinha, 1 kit de limpeza, 1 biscoito",
        preco: "R$ 339,90",
        imagem: "assets/images/destaque/100.webp",
        whatsapp: "5584988692337",
        mensagem: "Ol√°, tenho interesse na Cesta B√°sica de 10kg. Poderia me dar mais informa√ß√µes sobre ela?"
    }
];

const carrossel = document.getElementById('carrossel');
const btnAnterior = document.getElementById('anterior');
const btnProximo = document.getElementById('proximo');
const dotsContainer = document.getElementById('dots-container');

let currentIndex = 0;
let itemsPerView = 1;

// Define quantos itens aparecem por vez
function updateItemsPerView() {
    const width = window.innerWidth;

    if (width >= 768) {
        itemsPerView = 2; // m√°ximo de 2 em telas maiores
    } else {
        itemsPerView = 1;
    }

    const maxIndex = produtosDestaque.length - itemsPerView;
    if (currentIndex > maxIndex) currentIndex = maxIndex;

    updateCarrossel();
    updateDots();
}

// Atualiza a posi√ß√£o do carrossel (Usado apenas quando o `scroll-snap` n√£o est√° ativo)
function updateCarrossel() {
    // Verifica se estamos em desktop e se a navega√ß√£o por JS √© necess√°ria
    if (window.innerWidth >= 768) {
        if (!carrossel.firstElementChild) return;
        // itemWidth √© calculado de forma mais precisa no CSS com `calc(50% - 10px)`
        const itemWidth = carrossel.firstElementChild.offsetWidth;
        // Espa√ßamento entre itens √© 10px (0.7rem no CSS)
        const offset = -currentIndex * (itemWidth + 10); 
        carrossel.style.transform = `translateX(${offset}px)`;
    } else {
        // Limpa o transform no mobile para permitir o scroll nativo (swipe)
        carrossel.style.transform = 'translateX(0)';
    }
}

// Cria as bolinhas de navega√ß√£o
function updateDots() {
    dotsContainer.innerHTML = '';
    // A contagem de dots deve ser a mesma da navega√ß√£o
    const totalDots = produtosDestaque.length - itemsPerView + 1;
    for (let i = 0; i < totalDots; i++) {
        const dot = document.createElement('span');
        dot.classList.add('dot');
        if (i === currentIndex) dot.classList.add('active');
dot.addEventListener('click', () => {
  currentIndex = i;

  // --- Desktop: usa translateX controlado ---
  if (window.innerWidth >= 768) {
    updateCarrossel();
  } 
  // --- Mobile: rola suavemente at√© o item ---
  else {
    const itemWidth = carrossel.firstElementChild
      ? carrossel.firstElementChild.offsetWidth + 10
      : 0;
    const targetScroll = currentIndex * itemWidth;
    carrossel.scrollTo({
      left: targetScroll,
      behavior: 'smooth'
    });
  }

  updateDots();
});

        dotsContainer.appendChild(dot);
    }
}

// Bot√µes de navega√ß√£o (Vis√≠veis apenas no Desktop - Ver CSS)
btnAnterior.addEventListener('click', () => {
    if (currentIndex > 0) {
        currentIndex--;
    } else {
        currentIndex = produtosDestaque.length - itemsPerView; // Loop
    }
    updateCarrossel();
    updateDots();
});

btnProximo.addEventListener('click', () => {
    const maxIndex = produtosDestaque.length - itemsPerView;
    if (currentIndex < maxIndex) {
        currentIndex++;
    } else {
        currentIndex = 0; // Loop
    }
    updateCarrossel();
    updateDots();
});

// Sincroniza os dots com o scroll manual (toque)
carrossel.addEventListener('scroll', () => {
  const itemWidth = carrossel.firstElementChild
    ? carrossel.firstElementChild.offsetWidth + 10
    : 0;
  const scrollLeft = carrossel.scrollLeft;
  const index = Math.round(scrollLeft / itemWidth);
  if (currentIndex !== index) {
    currentIndex = index;
    updateDots();
  }
});


// Renderiza os produtos em destaque (COM MODIFICA√á√ïES PARA COMPACTA√á√ÉO)
function renderizarProdutosDestaque() {
    carrossel.innerHTML = '';
    produtosDestaque.forEach(produto => {
        const itemDiv = document.createElement('div');
        itemDiv.classList.add('carrossel-item');

        // Layout mais compacto, focado na imagem, t√≠tulo, pre√ßo e bot√£o "Negociar"
        itemDiv.innerHTML = `
            <div class="item-media">
                <img src="${produto.imagem}" alt="${produto.titulo}" class="item-imagem">
            </div>
            <div class="item-info">
                <h3 class="item-titulo">${produto.titulo}</h3>
                <p class="item-preco">${produto.preco}</p>
                <a href="https://wa.me/${produto.whatsapp}?text=${encodeURIComponent(produto.mensagem)}"
                    target="_blank" class="whatsapp-btn">
                    Mais informa√ß√µes
                </a>
            </div>
        `;
        carrossel.appendChild(itemDiv);
    });

    updateItemsPerView();
}

document.addEventListener('DOMContentLoaded', renderizarProdutosDestaque);
// === Sincroniza os dots com o scroll (para mobile / toque) ===
carrossel.addEventListener('scroll', () => {
  // Largura de um item (inclui gap de 10px do CSS)
  const itemWidth = carrossel.firstElementChild
    ? carrossel.firstElementChild.offsetWidth + 10
    : 0;

  // √çndice atual com base na posi√ß√£o de scroll
  const scrollLeft = carrossel.scrollLeft;
  const index = Math.round(scrollLeft / itemWidth);

  if (currentIndex !== index) {
    currentIndex = index;
    updateDots();
  }
});

window.addEventListener('resize', () => {
    clearTimeout(window.resizeTimer);
    window.resizeTimer = setTimeout(updateItemsPerView, 250);
});
// Impede o carrossel de ‚Äúpular‚Äù mais de um item ao rolar r√°pido
let isScrolling;
carrossel.addEventListener('scroll', () => {
  window.clearTimeout(isScrolling);
  isScrolling = setTimeout(() => {
    const itemWidth = carrossel.firstElementChild
      ? carrossel.firstElementChild.offsetWidth + 10
      : 0;
    const index = Math.round(carrossel.scrollLeft / itemWidth);
    carrossel.scrollTo({
      left: index * itemWidth,
      behavior: 'smooth'
    });
  }, 100); // executa depois que o usu√°rio termina o toque
});

</script>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const setas = document.querySelectorAll(
    '.carrossel-navegacao, .carrossel-navegacao button, .navegacao-btn, #anterior, #proximo'
  );
  setas.forEach(el => {
    el.style.display = 'none';
    el.style.visibility = 'hidden';
    el.style.opacity = '0';
    el.style.pointerEvents = 'none';
    el.style.position = 'absolute';
    el.style.left = '-9999px';
    el.style.top = '-9999px';
  });
});
</script>






  <script>
    async function carregarProdutos() {
      const res = await fetch('/produtos');
      const produtos = await res.json();

      const container = document.getElementById('lista-produtos');
      container.innerHTML = ''; // limpa o conte√∫do anterior

      produtos.forEach(prod => {
        const div = document.createElement('div');
        div.className = 'produto';
        div.innerHTML = `
        <img src="${prod.imagem}" alt="${prod.nome}" />
        <h3>${prod.nome}</h3>
        <p>R$ ${parseFloat(prod.preco).toFixed(2)} (${prod.tipo})</p>
      `;
        container.appendChild(div);
      });
    }

    carregarProdutos();
  </script>


  <!--Script da biblioteca Swiper-->
  <script src="https://unpkg.com/swiper@8/swiper-bundle.min.js"></script>


  <!--Scroll reveal-->
  <script src="https://unpkg.com/scrollreveal"></script>

  <!--Main JS-->
  <script src="/script.js"></script>

  </body>

</html>